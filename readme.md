# 任务管理平台 - 需求开发文档

## 1. 项目概述

本项目旨在开发一个简洁高效的任务管理平台，旨在帮助团队更好地协调和跟踪任务。平台区分两种用户角色：管理员和普通用户。管理员负责创建和管理任务，并对所有用户进行管理；普通用户可以查看、领取和完成分配给自己的任务。

## 2. 用户角色与权限

为了确保平台的安全和高效运作，我们定义了以下两种用户角色：

### 2.1. 管理员 (Admin)

管理员是平台的最高权限拥有者，拥有以下权限：

- **登录**：通过专属的管理员账号和密码登录系统。
- **用户管理**：
  - **创建用户**：可以添加新的普通用户账号。
  - **查看用户**：可以浏览所有已注册的用户列表。
  - **编辑用户**：可以修改用户的基本信息（如重置密码）。
  - **删除用户**：可以移除不再需要的用户账号。
- **任务管理**：
  - **发布任务**：可以创建新任务，并指定任务的标题、描述、截止日期和负责人。
  - **查看所有任务**：可以浏览平台上的所有任务，包括已分配和未分配的。
  - **编辑任务**：可以修改任务的任何信息。
  - **删除任务**：可以删除不再需要的任务。
- **分类管理**：
  - **创建分类**：可以添加新的任务分类。
  - **查看分类**：可以浏览所有任务分类。
  - **编辑分类**：可以修改分类名称。
  - **删除分类**：可以删除不再需要的分类。
- **仪表盘**：可以查看任务完成情况、用户活跃度等统计数据，以便更好地了解项目进展。

### 2.2. 普通用户 (User)

普通用户是平台的主要使用者，其权限如下：

- **登录**：使用自己的账号和密码登录系统。
- **任务查看**：
  - **查看我的任务**：可以查看所有分配给自己的任务列表。
  - **查询任务**：可以根据任务状态（如“待处理”、“进行中”、“已完成”）筛选和搜索自己的任务。
- **任务操作**：
  - **领取任务**：可以从“任务池”中领取未被分配的任务。
  - **更新任务状态**：可以将任务标记为“进行中”或“已完成”。
- **个人信息管理**：可以修改自己的密码和联系方式。

## 3. 功能模块规划

为了实现上述需求，平台将包含以下几个核心功能模块：

### 3.1. 用户认证模块

这是平台安全的第一道防线，确保只有授权用户才能访问。

- **用户登录**：提供一个安全的登录页面，用户可以通过输入账号和密码进入系统。系统会根据用户类型（管理员或普通用户）导向不同的操作界面。
- **密码修改**：用户可以在个人中心修改自己的登录密码，增强账户安全性。

### 3.2. 用户管理模块（管理员专属）

此模块赋予管理员管理平台所有用户的能力。

- **用户列表**：以列表形式展示所有用户信息，包括用户名、角色和状态。
- **添加用户**：管理员可以手动创建新的普通用户账号。
- **编辑用户信息**：管理员可以重置用户密码或修改用户信息。
- **删除用户**：管理员可以删除不再需要的用户账号。

### 3.3. 任务管理模块

这是平台的核心，用于任务的发布、分配和跟踪。

- **任务发布**（管理员）：管理员可以创建新任务，填写任务标题、详细描述、截止日期，选择任务分类，并可以选择是否直接指派给某个用户。
- **任务列表**：
  - **管理员**：可以查看所有任务，并按状态（待领取、进行中、已完成、已逾期）和分类进行筛选和排序。
  - **普通用户**：可以查看"任务池"中未被领取的任务和已分配给自己的任务，支持按分类筛选。
- **任务领取与更新**（普通用户）：用户可以从"任务池"中主动领取任务，并随时更新任务状态（如从"待处理"更新为"进行中"，或标记为"已完成"）。

### 3.4. 分类管理模块（管理员专属）

此模块用于管理任务的分类，帮助更好地组织和筛选任务。

- **分类列表**：以列表形式展示所有任务分类。
- **分类操作**：
  - **创建分类**：添加新的任务分类，设置分类名称和描述。
  - **编辑分类**：修改已有分类的名称和描述。
  - **删除分类**：删除不再需要的分类（仅当分类下没有关联任务时才允许删除）。
- **分类统计**：展示每个分类下的任务数量和完成情况。

### 3.5. 仪表盘模块（管理员专属）

提供数据洞察，帮助管理员了解整体工作进展。

- **任务统计**：以图表形式展示任务的完成比例、逾期情况等。
- **用户活跃度**：展示每位用户的任务完成情况和贡献度，帮助进行绩效评估。

## 4. 数据模型设计

为了支撑上述功能，我们需要设计合理的数据结构来存储信息。这就像为我们的系统建立一个信息仓库，确保所有数据都能被有序地存放和调用。

### 4.1. 用户表 (Users)

这张表用来存储所有用户的信息。

| 字段名 | 数据类型 | 描述 | 备注 |
| :--- | :--- | :--- | :--- |
| `user_id` | 整数 | 用户的唯一标识 | 主键，自动增加 |
| `username` | 字符串 | 用户名，用于登录 | 必须唯一 |
| `password` | 字符串 | 加密后的密码 | 不能明文存储 |
| `role` | 枚举 | 用户角色 | 'admin' 或 'user' |
| `created_at` | 时间戳 | 账号创建时间 | 记录用户注册的日期 |

### 4.2. 分类表 (Categories)

这张表用来存储任务的分类信息。

| 字段名 | 数据类型 | 描述 | 备注 |
| :--- | :--- | :--- | :--- |
| `category_id` | 整数 | 分类的唯一标识 | 主键，自动增加 |
| `name` | 字符串 | 分类名称 | 必须唯一 |
| `description` | 文本 | 分类描述 | 可以为空 |
| `created_at` | 时间戳 | 分类创建时间 | |
| `creator_id` | 整数 | 创建该分类的管理员ID | 关联到用户表的 `user_id` |

### 4.3. 任务表 (Tasks)

这张表用来存储所有任务的详细信息。

| 字段名 | 数据类型 | 描述 | 备注 |
| :--- | :--- | :--- | :--- |
| `task_id` | 整数 | 任务的唯一标识 | 主键，自动增加 |
| `title` | 字符串 | 任务标题 | 简洁明了地概括任务内容 |
| `description` | 文本 | 任务的详细描述 | 可以包含任务的具体要求和背景 |
| `category_id` | 整数 | 任务所属分类 | 关联到分类表的 `category_id` |
| `status` | 枚举 | 任务当前的状态 | '待领取', '进行中', '已完成', '已逾期' |
| `created_at` | 时间戳 | 任务创建时间 |   |
| `due_date` | 日期 | 任务截止日期 |   |
| `creator_id` | 整数 | 创建该任务的管理员ID | 关联到用户表的 `user_id` |
| `assignee_id` | 整数 | 负责该任务的用户ID | 关联到用户表的 `user_id`，可以为空 |

## 5. 数据库初始化

本项目提供了完整的数据库初始化SQL脚本，帮助你快速搭建数据库环境。

### 5.1. SQL文件说明

项目根目录下包含以下数据库相关文件：

- **`supabase-database.sql`** - Supabase/PostgreSQL版本（推荐）
  - 适用于Supabase平台
  - 包含行级安全策略(RLS)
  - 支持自动更新时间戳
  - 包含完整的权限控制

- **`database.sql`** - MySQL版本
  - 适用于传统MySQL数据库
  - 兼容MySQL 5.7+版本

- **`数据库使用说明.md`** - 详细使用指南
  - 包含完整的使用步骤
  - 故障排除指南
  - 安全注意事项

### 5.2. 快速开始

#### 使用Supabase（推荐）

1. 登录你的Supabase项目控制台
2. 进入「SQL Editor」页面
3. 复制 `supabase-database.sql` 文件内容
4. 粘贴到SQL编辑器并执行
5. 等待执行完成

#### 使用MySQL

1. 连接到MySQL数据库
2. 创建新数据库：`CREATE DATABASE task_management;`
3. 执行 `database.sql` 文件中的SQL语句

### 5.3. 默认账号

数据库初始化后，系统会自动创建以下测试账号：

| 用户名 | 密码 | 角色 | 说明 |
|--------|------|------|------|
| admin | admin123 | 管理员 | 系统管理员 |
| manager | manager123 | 管理员 | 管理员账号 |
| zhangsan | user123 | 普通用户 | 测试用户 |
| lisi | user123 | 普通用户 | 测试用户 |
| wangwu | user123 | 普通用户 | 测试用户 |

**注意**：这些是测试账号，生产环境中请及时修改密码！

### 5.4. 数据库表结构

系统包含三个核心数据表：

- **users** - 用户信息表
- **categories** - 任务分类表  
- **tasks** - 任务信息表

详细的表结构说明请参考 `数据库使用说明.md` 文件。

## 6. 项目运行

### 6.1. 环境要求

- Node.js 14+
- npm 或 yarn
- Supabase账号（推荐）或MySQL数据库

### 6.2. 安装步骤

1. **克隆项目**
   ```bash
   git clone [项目地址]
   cd task-management-system
   ```

2. **安装依赖**
   ```bash
   npm install
   ```

3. **配置数据库**
   - 按照上述「数据库初始化」步骤设置数据库
   - 配置 `src/supabaseClient.js` 中的连接参数

4. **启动项目**
   ```bash
   npm start
   ```

5. **访问应用**
   - 打开浏览器访问 `http://localhost:3001`
   - 使用默认账号登录测试

### 6.3. 功能测试

登录后可以测试以下功能：

**管理员功能**：
- 用户管理（增删改查）
- 分类管理（增删改查）
- 任务管理（增删改查）
- 数据库连接测试

**普通用户功能**：
- 查看任务列表
- 更新任务状态
- 个人信息管理

## 7. 未来扩展建议

为了让平台更具竞争力和实用性，我们可以在未来考虑加入以下高级功能：

- **消息通知系统**：
  - 当有新任务被分配、任务即将到期或状态发生变更时，系统可以通过邮件或站内信的方式自动通知相关用户，确保信息传递的及时性。

- **文件上传功能**：
  - 允许用户在创建或完成任务时上传相关文件（如文档、图片），方便资料的归档和查阅。

- **任务评论与协作**：
  - 在每个任务下方增加评论区，允许团队成员就任务细节进行沟通和协作，所有讨论记录一目了然。

- **更丰富的仪表盘**：
  - 提供更多维度的数据分析，例如团队成员的工作负载分析、项目燃尽图等，帮助管理者更科学地决策。

- **移动端适配**：
  - 开发移动版应用或优化网页的移动端显示，让用户可以随时随地通过手机管理任务。