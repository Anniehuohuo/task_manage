# 任务管理系统 - 宝塔面板部署指南

## 📋 部署前准备

### 1. 服务器要求
- 操作系统：Linux（推荐 CentOS 7+ 或 Ubuntu 18+）
- 内存：至少 1GB
- 硬盘：至少 10GB 可用空间
- 已安装宝塔面板

### 2. 宝塔面板环境配置
在宝塔面板中安装以下软件：
- **Nginx** 1.18+
- **MySQL** 5.7+ 或 **MariaDB** 10.3+
- **PHP** 7.4+（可选，用于其他功能）

## 🚀 部署步骤

### 第一步：准备项目文件

1. **构建生产版本**（已完成）
   ```bash
   npm run build
   ```
   构建完成后会生成 `build` 文件夹

2. **打包 build 文件夹**
   - 将 `build` 文件夹压缩为 `build.zip`
   - 或者直接复制 `build` 文件夹内的所有文件

### 第二步：在宝塔面板创建网站

1. **登录宝塔面板**
   - 访问您的服务器IP:8888
   - 输入用户名和密码登录

2. **创建网站**
   - 点击左侧菜单「网站」
   - 点击「添加站点」
   - 填写域名（如：yourdomain.com）
   - 选择PHP版本（可选择纯静态）
   - 点击「提交」

### 第三步：上传项目文件

1. **进入网站目录**
   - 在网站列表中找到刚创建的网站
   - 点击「根目录」进入文件管理

2. **清空默认文件**
   - 删除默认的 `index.html` 等文件

3. **上传项目文件**
   - 上传 `build.zip` 并解压
   - 或者直接上传 `build` 文件夹内的所有文件到网站根目录

### 第四步：配置 Nginx

1. **修改 Nginx 配置**
   - 在网站列表中点击「设置」
   - 选择「配置文件」标签
   - 将配置替换为项目中的 `baota-nginx.conf` 内容
   - 记得修改域名和路径

2. **重要配置说明**
   ```nginx
   # 修改这两行为您的实际信息
   server_name your-domain.com;  # 改为您的域名
   root /www/wwwroot/your-domain.com;  # 改为您的网站路径
   ```

3. **保存并重载 Nginx**
   - 点击「保存」
   - 重启 Nginx 服务

### 第五步：配置数据库（Supabase）

由于项目使用 Supabase 作为数据库，无需在服务器上配置数据库。

**确保 Supabase 配置正确：**
1. 检查 `src/supabaseClient.js` 中的配置
2. 确保 Supabase 项目的 URL 和 API Key 正确
3. 确保数据库表已正确创建

### 第六步：配置 SSL 证书（推荐）

1. **申请 SSL 证书**
   - 在网站设置中选择「SSL」
   - 选择「Let's Encrypt」免费证书
   - 点击「申请」

2. **强制 HTTPS**
   - 证书申请成功后
   - 开启「强制HTTPS」

## ✅ 部署验证

### 检查项目是否正常运行

1. **访问网站**
   - 在浏览器中访问您的域名
   - 应该能看到登录页面

2. **功能测试**
   - 测试登录功能
   - 测试任务管理功能
   - 测试搜索功能

3. **检查控制台**
   - 按 F12 打开开发者工具
   - 查看是否有错误信息

## 🔧 常见问题解决

### 问题1：页面刷新后出现 404
**原因：** Nginx 没有正确配置 React Router
**解决：** 确保 Nginx 配置中包含：
```nginx
location / {
    try_files $uri $uri/ /index.html;
}
```

### 问题2：静态资源加载失败
**原因：** 路径配置问题
**解决：** 检查 `package.json` 中的 `homepage` 字段，确保为 `/`

### 问题3：API 请求失败
**原因：** Supabase 配置错误或网络问题
**解决：** 
1. 检查 Supabase URL 和 API Key
2. 确保服务器能访问外网
3. 检查防火墙设置

### 问题4：网站访问慢
**解决方案：**
1. 启用 Gzip 压缩（已在配置中包含）
2. 配置静态资源缓存（已在配置中包含）
3. 使用 CDN 加速

## 📝 维护说明

### 更新项目
1. 在本地修改代码
2. 运行 `npm run build` 重新构建
3. 上传新的 build 文件到服务器
4. 清除浏览器缓存

### 备份
- 定期备份网站文件
- 备份 Supabase 数据库
- 备份 Nginx 配置文件

### 监控
- 定期检查网站访问情况
- 监控服务器资源使用
- 查看 Nginx 访问日志

## 🎉 部署完成

恭喜！您的任务管理系统已成功部署到宝塔面板。

**项目特色功能：**
- ✅ 黑白极简设计风格
- ✅ 手写字体标题效果
- ✅ 任务管理与搜索功能
- ✅ 分类管理与搜索功能
- ✅ 用户管理与搜索功能
- ✅ 响应式设计，支持移动端

如有问题，请检查上述常见问题解决方案或联系技术支持。